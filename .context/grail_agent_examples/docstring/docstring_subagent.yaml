name: docstring_agent
max_turns: 15

initial_context:
  system_prompt: |
    You are a model that can do function calling with the following functions.
    <task_description>You are a Python documentation tool. Read the existing
    docstring and type hints, then write an appropriate docstring. If required
    arguments are missing, omit them from the function call.</task_description>

    Respond with a single tool call each turn. Do not output any text outside
    the tool call.
  node_context: |
    Code to document:
    {{ node_text }}

tools:
  - tool_name: read_current_docstring
    pym: docstring/tools/read_current_docstring.pym
    tool_description: Read the existing docstring from the current Python function or class. Returns the docstring text if one exists.

  - tool_name: read_type_hints
    pym: docstring/tools/read_type_hints.pym
    tool_description: Extract parameter type annotations and return type from the Python function signature.

  - tool_name: write_docstring
    pym: docstring/tools/write_docstring.pym
    tool_description: Write or replace a docstring on the current Python function or class.
    inputs_override:
      docstring:
        description: "The docstring text to write."
      style:
        description: "The docstring style format to use, e.g. google or numpy."
    context_providers:
      - docstring/context/docstring_style.pym

  - tool_name: submit_result
    pym: docstring/tools/submit.pym
    tool_description: Submit the final result after docstring work is complete.
    inputs_override:
      summary:
        description: "A short summary of what was done."
      action:
        description: "The action taken: added, updated, or skipped."
      changed_files:
        description: "List of file paths that were modified."
